<p align="center">
<img src="https://i.ibb.co/xC6fx3k/Gym-Buddy-logo.png" width="400" alt="Gym Buddy Logo"/>
</p>

<p align="center">
This project has been developed as part of the android development university class, with the objective of creating a full-stack mobile application. 
<p>

## Stack

- NodeJS
- Prisma
- PostgreSQL

## Getting Started

Before starting, this project expects Node and PostgreSQL to be installed.

### Prerequisite

- Install dependencies

```bash
npm install
```

- Setup `.env` file as expected in `.env.example`

### Run

To run the project just have to execute the following command:

```bash
npm start
```

### Run in Development Mode

To run in development mode, with watch functionality, just execute the following command:

```bash
npm run dev
```

## Setup

### Environments

- We have three environment branches, `develop`, `staging` and `master`.
- `develop` is where all development happens. Every new feature, bug fix, or enhancement starts in a feature branch based off `develop`. Once completed, it gets merged back into `develop` always using `squash and merge`.
- `staging` mirrors a pre-production environment. Once features are tested and ready in `develop`, they are merged into `staging` for further testing in an environment that closely resembles production.
- `master` represents the production environment. Code in `master` is always deployed and reflects what's currently live. Merges into `master` happen from the `staging` branch after thorough testing.
- `hotfixes` are direct fixes to staging and master (if needed) that are made through hotfix branches. These are critical fixes that can't go through the usual process due to urgency. They should be merged back into both develop and staging to ensure consistency.

<pre>
[Feature branches]        [Develop]       [Staging]       [Master]
       |                       |               |               |
       |--- Feature A -------->|               |               |
       |                       |               |               |
       |--- Feature B -------->|               |               |
       |                       |--- Merge ---> |               |
       |                       |               |               |
       |                       |               |--- Deploy --> |
       |                       |               |               |
       |                       |<-- Hotfix ----|<-- Hotfix ----|
       |                       |               |               |
       |--- Feature C -------->|               |               |
       |                       |               |               |
       |                       |--- Merge ---> |               |
       |                       |               |               |
       |                       |               |--- Deploy --> |
</pre>

### Server & Deployment

- [Vercel](https://vercel.com/) is used to configure and deploy production version.
- Vercel is connected to branch `master` and automatically deploys a new version when there is an update

## Generating new migrations

When changes are made to Prisma schema file (schema.prisma), a migration needs to be created to update the database schema accordingly. This process can be done with the following steps.

### 1. Modify Prisma Schema

Ensure the Prisma Schema reflects the changes you wish to make. This involves adding new models, modifying existing ones, or removing models. For this changes to be applied, a migration needs to be generated (next step).

### 2. Generate the Migration

A new migration can be generated by running the following command in the terminal:

```bash
npx prisma migrate dev --name descriptive_migration_name
```

- NOTE: change `descriptive_migration_name` by a accurate description of what changes were made.

### 3. Verify the Migration

After generating and applying the migration, you need to verify that is has been applied correctly. You can inpect the generated SQL file in the `prisma/migrations` directory and you can also check the database shcema directly to see th applied changes (pgAdmin).
